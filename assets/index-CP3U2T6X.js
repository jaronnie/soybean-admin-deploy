var _e=Object.defineProperty;var Z=t=>{throw TypeError(t)};var Pe=(t,e,s)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var m=(t,e,s)=>Pe(t,typeof e!="symbol"?e+"":e,s),ee=(t,e,s)=>e.has(t)||Z("Cannot "+s);var d=(t,e,s)=>(ee(t,e,"read from private field"),s?s.call(t):e.get(t)),z=(t,e,s)=>e.has(t)?Z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);var o=(t,e,s)=>(ee(t,e,"access private method"),s);import{_ as Ce}from"./web-site-link.vue_vue_type_script_setup_true_lang-DeU5GH4F.js";import{_ as Ee}from"./github-link.vue_vue_type_script_setup_true_lang-un05Zl0H.js";import{d as Ie,bd as Ne,i as xe,o as Le,b as ke,f as C,w as U,g as ve,e as Ae,z as De,L as qe}from"./index-DTCgPdtS.js";import{_ as Me}from"./Space-BxRv4wJm.js";import"./get-slot-Bk_rJcZu.js";const oe=t=>Array.isArray(t),ue=t=>oe(t)?t:[t];let Re=function(t){let e=function(c){return ue(c).forEach(g=>{var D;return f.set(Symbol((D=g.char)==null?void 0:D.innerText),n({...g}))}),this},s=()=>l().filter(c=>c.typeable),r=function(c,g){let D=[...f.keys()];f.set(D[c],n(g))},n=c=>(c.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},c),u=function(){f.forEach(c=>delete c.done)},h=function(){f=new Map,e(t)},a=()=>f,l=()=>Array.from(f.values()),p=c=>f.delete(c),A=(c=!1)=>c?l():l().filter(g=>!g.done),T=(c,g=!1)=>g?f.delete(c):f.get(c).done=!0,f=new Map;return e(t),{add:e,set:r,wipe:h,done:T,reset:u,destroy:p,getItems:A,getQueue:a,getTypeable:s}};const ae="data-typeit-id",S="ti-cursor",$e="END",Fe={started:!1,completed:!1,frozen:!1,destroyed:!1},P={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(t=>({opacity:t})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},He=`[${ae}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,M=t=>document.createElement(t),X=t=>document.createTextNode(t),le=(t,e="")=>{let s=M("style");s.id=e,s.appendChild(X(t)),document.head.appendChild(s)},te=t=>(oe(t)||(t=[t/2,t/2]),t),se=(t,e)=>Math.abs(Math.random()*(t+e-(t-e))+(t-e));let ie=t=>t/2;function Be(t){let{speed:e,deleteSpeed:s,lifeLike:r}=t;return s=s!==null?s:e/3,r?[se(e,ie(e)),se(s,ie(s))]:[e,s]}const he=t=>Array.from(t);let K=t=>([...t.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(s=>{e.parentNode.insertBefore(X(s),e)}),e.remove();return}K(e)}),t);const de=t=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,K(e.body)};function ce(t,e=!1,s=!1){let r=t.querySelector(`.${S}`),n=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:a=>{var l,p;if(r&&s){if((l=a.classList)!=null&&l.contains(S))return NodeFilter.FILTER_ACCEPT;if(r.contains(a))return NodeFilter.FILTER_REJECT}return(p=a.classList)!=null&&p.contains(S)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),u,h=[];for(;u=n.nextNode();)u.originalParent||(u.originalParent=u.parentNode),h.push(u);return e?h.reverse():h}function Qe(t){return ce(de(t))}function ze(t,e=!0){return e?Qe(t):he(t).map(X)}const Ue=({index:t,newIndex:e,queueItems:s,cleanUp:r})=>{for(let n=t+1;n<e+1;n++)r(s[n][0])},fe=t=>Number.isInteger(t),re=({queueItems:t,selector:e,cursorPosition:s,to:r})=>{if(fe(e))return e*-1;let n=new RegExp($e,"i").test(r),u=e?[...t].reverse().findIndex(({char:a})=>{let l=a.parentElement,p=l.matches(e);return n&&p?!0:p&&l.firstChild.isSameNode(a)}):-1;u<0&&(u=n?0:t.length-1);let h=n?0:1;return u-s+h},Ve=t=>(t.forEach(clearTimeout),[]),q=(t,e)=>new Array(e).fill(t);let H=t=>new Promise(e=>{requestAnimationFrame(async()=>{e(await t())})}),pe=t=>t==null?void 0:t.getAnimations().find(e=>e.id===t.dataset.tiAnimationId),me=({cursor:t,frames:e,options:s})=>{let r=t.animate(e,s);return r.pause(),r.id=t.dataset.tiAnimationId,H(()=>{H(()=>{r.play()})}),r},We=({cursor:t,options:e,cursorOptions:s})=>{if(!t||!s)return;let r=pe(t),n;r&&(e.delay=r.effect.getComputedTiming().delay,n=r.currentTime,r.cancel());let u=me({cursor:t,frames:s.animation.frames,options:e});return n&&(u.currentTime=n),u},ne=t=>{var e;return(e=t.func)==null?void 0:e.call(null)},je=async({index:t,queueItems:e,wait:s,cursor:r,cursorOptions:n})=>{let u=e[t][1],h=[],a=t,l=u,p=()=>l&&!l.delay,A=u.shouldPauseCursor()&&n.autoPause;for(;p();)h.push(l),p()&&a++,l=e[a]?e[a][1]:null;if(h.length)return await H(async()=>{for(let c of h)await ne(c)}),a-1;let T=pe(r),f;return T&&(f={...T.effect.getComputedTiming(),delay:A?n.autoPauseDelay:0}),await s(async()=>{T&&A&&T.cancel(),await H(()=>{ne(u)})},u.delay),await We({cursor:r,options:f,cursorOptions:n}),t};const Oe=(t,e)=>{new IntersectionObserver((r,n)=>{r.forEach(u=>{u.isIntersecting&&(e(),n.unobserve(t))})},{threshold:1}).observe(t)},Ge=()=>Math.random().toString().substring(2,9),B=t=>"value"in t;let Je=t=>B(t)?he(t.value):ce(t,!0).filter(e=>!(e.childNodes.length>0)),_=t=>typeof t=="function"?t():t,Y=(t,e=document,s=!1)=>e[`querySelector${s?"All":""}`](t),Xe=t=>/body/i.test(t==null?void 0:t.tagName),Ke=(t,e)=>{if(B(t)){t.value=`${t.value}${e.textContent}`;return}e.innerHTML="";let s=Xe(e.originalParent)?t:e.originalParent||t;s.insertBefore(e,Y("."+S,s)||null)};const Ye=t=>/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML),E=(t,e)=>Object.assign({},t,e);let Ze=t=>{var e,s;if(typeof t=="object"){let r={},{frames:n,options:u}=P.cursor.animation;return r.animation=t.animation||{},r.animation.frames=((e=t.animation)==null?void 0:e.frames)||n,r.animation.options=E(u,((s=t.animation)==null?void 0:s.options)||{}),r.autoPause=t.autoPause??P.cursor.autoPause,r.autoPauseDelay=t.autoPauseDelay||P.cursor.autoPauseDelay,r}return t===!0?P.cursor:t};const et=(t,e)=>{if(!t)return;let s=t.parentNode;(s.childNodes.length>1||s.isSameNode(e)?t:s).remove()},tt=(t,e,s)=>{let r=e[s-1],n=Y(`.${S}`,t);t=(r==null?void 0:r.parentNode)||t,t.insertBefore(n,r||null)};function st(t){return typeof t=="string"?Y(t):t}let it={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},rt=(t,e)=>{let r=`${`[${ae}='${t}']`} .${S}`,n=getComputedStyle(e),u=Object.entries(it).reduce((h,[a,l])=>`${h} ${a}: var(--ti-cursor-${a}, ${l||n[a]});`,"");le(`${r} { display: inline-block; width: 0; ${u} }`,t)};function nt(t){return t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let ot=(t,e,s)=>Math.min(Math.max(e+t,0),s.length),ut=(t,e,s)=>new Promise(r=>{let n=async()=>{await t(),r()};s.push(setTimeout(n,e||0))});var i,ye,I,V,be,W,j,O,R,y,ge,N,x,we,Q,Se,Te,G,$,L,F,w,k,v,J,b;class at{constructor(e,s={}){z(this,i);m(this,"element");m(this,"timeouts");m(this,"cursorPosition");m(this,"predictedCursorPosition");m(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1});m(this,"opts");m(this,"id");m(this,"queue");m(this,"cursor");m(this,"unfreeze",()=>{});m(this,"is",function(e){return this.statuses[e]});z(this,Q,e=>{e.cursor=Ze(e.cursor??P.cursor),this.opts.strings=o(this,i,Se).call(this,ue(this.opts.strings)),this.opts=E(this.opts,{html:!d(this,i,v)&&this.opts.html,nextStringDelay:te(this.opts.nextStringDelay),loopDelay:te(this.opts.loopDelay)})});this.opts=E(P,s),this.element=st(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=E({},Fe),this.id=Ge(),this.queue=Re([{delay:this.opts.startDelay}]),d(this,Q).call(this,s),this.cursor=o(this,i,Te).call(this),this.element.dataset.typeitId=this.id,le(He),this.opts.strings.length&&o(this,i,we).call(this)}go(){return this.statuses.started?this:(o(this,i,O).call(this),this.opts.waitUntilVisible?(Oe(this.element,o(this,i,I).bind(this)),this):(o(this,i,I).call(this),this))}destroy(e=!0){this.timeouts=Ve(this.timeouts),_(e)&&this.cursor&&o(this,i,F).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let s in this.statuses)this.statuses[s]=!1;return this.element[o(this,i,R).call(this)?"value":"innerHTML"]="",this}type(e,s={}){e=_(e);let{instant:r}=s,n=o(this,i,N).call(this,s),h=ze(e,this.opts.html).map(l=>({func:()=>o(this,i,$).call(this,l),char:l,delay:r||Ye(l)?0:o(this,i,w).call(this),typeable:l.nodeType===Node.TEXT_NODE})),a=[n[0],{func:async()=>await this.opts.beforeString(e,this)},...h,{func:async()=>await this.opts.afterString(e,this)},n[1]];return o(this,i,y).call(this,a,s)}break(e={}){return o(this,i,y).call(this,{func:()=>o(this,i,$).call(this,M("BR")),typeable:!0},e)}move(e,s={}){e=_(e);let r=o(this,i,N).call(this,s),{instant:n,to:u}=s,h=re({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:u,cursorPosition:d(this,i,k)}),a=h<0?-1:1;return this.predictedCursorPosition=d(this,i,k)+h,o(this,i,y).call(this,[r[0],...q({func:()=>o(this,i,V).call(this,a),delay:n?0:o(this,i,w).call(this),cursorable:!0},Math.abs(h)),r[1]],s)}exec(e,s={}){let r=o(this,i,N).call(this,s);return o(this,i,y).call(this,[r[0],{func:()=>e(this)},r[1]],s)}options(e,s={}){return e=_(e),o(this,i,x).call(this,e),o(this,i,y).call(this,{},s)}pause(e,s={}){return o(this,i,y).call(this,{delay:_(e)},s)}delete(e=null,s={}){e=_(e);let r=o(this,i,N).call(this,s),n=e,{instant:u,to:h}=s,a=this.queue.getTypeable(),l=n===null?a.length:fe(n)?n:re({queueItems:a,selector:n,cursorPosition:d(this,i,k),to:h});return o(this,i,y).call(this,[r[0],...q({func:o(this,i,L).bind(this),delay:u?0:o(this,i,w).call(this,1),deletable:!0},l),r[1]],s)}freeze(){this.statuses.frozen=!0}flush(e=()=>{}){return o(this,i,O).call(this),o(this,i,I).call(this,!1).then(e),this}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return o(this,i,x).call(this,e)}getElement(){return this.element}empty(e={}){return o(this,i,y).call(this,{func:o(this,i,ye).bind(this)},e)}}i=new WeakSet,ye=async function(){if(o(this,i,R).call(this)){this.element.value="";return}d(this,i,b).forEach(o(this,i,F).bind(this))},I=async function(e=!0){this.statuses.started=!0;let s=r=>{this.queue.done(r,!e)};try{let r=[...this.queue.getQueue()];for(let u=0;u<r.length;u++){let[h,a]=r[u];if(!a.done){if(!a.deletable||a.deletable&&d(this,i,b).length){let l=await o(this,i,W).call(this,u,r);Ue({index:u,newIndex:l,queueItems:r,cleanUp:s}),u=l}s(h)}}if(!e)return this;if(this.statuses.completed=!0,await this.opts.afterComplete(this),!this.opts.loop)throw"";let n=this.opts.loopDelay;o(this,i,j).call(this,async()=>{await o(this,i,be).call(this,n[0]),o(this,i,I).call(this)},n[1])}catch{}return this},V=async function(e){this.cursorPosition=ot(e,this.cursorPosition,d(this,i,b)),tt(this.element,d(this,i,b),this.cursorPosition)},be=async function(e){let s=d(this,i,k);s&&await o(this,i,V).call(this,{value:s});let r=d(this,i,b).map(n=>[Symbol(),{func:o(this,i,L).bind(this),delay:o(this,i,w).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let n=0;n<r.length;n++)await o(this,i,W).call(this,n,r);this.queue.reset(),this.queue.set(0,{delay:e})},W=function(e,s){return je({index:e,queueItems:s,wait:o(this,i,j).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},j=async function(e,s,r=!1){this.statuses.frozen&&await new Promise(n=>{this.unfreeze=()=>{this.statuses.frozen=!1,n()}}),r||await this.opts.beforeStep(this),await ut(e,s,this.timeouts),r||await this.opts.afterStep(this)},O=async function(){if(!o(this,i,R).call(this)&&this.cursor&&this.element.appendChild(this.cursor),d(this,i,J)){rt(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:s,options:r}=e;me({frames:s,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...r}})}},R=function(){return B(this.element)},y=function(e,s){return this.queue.add(e),o(this,i,ge).call(this,s),this},ge=function(e={}){let s=e.delay;s&&this.queue.add({delay:s})},N=function(e={}){return[{func:()=>o(this,i,x).call(this,e)},{func:()=>o(this,i,x).call(this,this.opts)}]},x=async function(e){this.opts=E(this.opts,e)},we=function(){let e=this.opts.strings.filter(s=>!!s);e.forEach((s,r)=>{if(this.type(s),r+1===e.length)return;let n=this.opts.breakLines?[{func:()=>o(this,i,$).call(this,M("BR")),typeable:!0}]:q({func:o(this,i,L).bind(this),delay:o(this,i,w).call(this,1)},this.queue.getTypeable().length);o(this,i,G).call(this,n)})},Q=new WeakMap,Se=function(e){let s=this.element.innerHTML;return s?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=s,K(this.element),o(this,i,G).call(this,q({func:o(this,i,L).bind(this),delay:o(this,i,w).call(this,1),deletable:!0},d(this,i,b).length)),e):nt(s).concat(e)):e},Te=function(){if(d(this,i,v))return null;let e=M("span");return e.className=S,d(this,i,J)?(e.innerHTML=de(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},G=function(e){let s=this.opts.nextStringDelay;this.queue.add([{delay:s[0]},...e,{delay:s[1]}])},$=function(e){Ke(this.element,e)},L=function(){d(this,i,b).length&&(d(this,i,v)?this.element.value=this.element.value.slice(0,-1):o(this,i,F).call(this,d(this,i,b)[this.cursorPosition]))},F=function(e){et(e,this.element)},w=function(e=0){return Be(this.opts)[e]},k=function(){return this.predictedCursorPosition??this.cursorPosition},v=function(){return B(this.element)},J=function(){return!!this.opts.cursor&&!d(this,i,v)},b=function(){return Je(this.element)};const mt=Ie({name:"plugin_typeit",__name:"index",setup(t){const e=Ne();function s(){if(!e.value)return;const r={strings:"SoybeanAdmin是一个清新优雅、高颜值且功能强大的后台管理模板",lifeLike:!0,speed:120,loop:!0};new at(e.value,r).go()}return xe(()=>{s()}),(r,n)=>{const u=Ee,h=Ce,a=Me,l=De,p=qe;return Le(),ke("div",null,[C(p,{title:"打字机 插件",bordered:!1,class:"h-full card-wrapper"},{default:U(()=>[C(a,{vertical:!0},{default:U(()=>[C(u,{link:"https://github.com/alexmacarthur/typeit"}),C(h,{label:"文档地址：",link:"https://www.typeitjs.com/docs/vanilla/usage/"})]),_:1}),C(l,{"title-placement":"left"},{default:U(()=>n[0]||(n[0]=[ve("基本示例")])),_:1}),Ae("span",{ref_key:"textRef",ref:e,class:"text-18px"},null,512)]),_:1})])}}});export{mt as default};
